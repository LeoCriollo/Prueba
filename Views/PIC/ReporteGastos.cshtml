@model DoleEcIntranet.Models.ReporteGastosModel
<style type="text/css">
    label {
        color: black;
        font-family: 'Times New Roman';
        font-size: 17px
    }

    .nowrap {
        white-space: nowrap;
    }

    .table-responsive {
        overflow-x: auto;
    }

    .checkbox {
        width: 17px;
        height: 17px;
    }

    .error {
        color: red
    }

    .container-input {
        text-align: center;
        border-radius: 6px;
        width: 50%;
        margin: 0 auto;
        margin-bottom: 20px;
    }

    .inputfile {
        width: 0.1px;
        height: 0.1px;
        opacity: 0;
        overflow: hidden;
        position: absolute;
        z-index: -1;
    }

        .inputfile + label {
            max-width: 80%;
            font-size: 1.25rem;
            font-weight: 700;
            text-overflow: ellipsis;
            white-space: nowrap;
            cursor: pointer;
            display: inline-block;
            overflow: hidden;
            padding: 0.625rem 1.25rem;
        }

            .inputfile + label svg {
                width: 1em;
                height: 1em;
                vertical-align: middle;
                fill: currentColor;
                margin-top: -0.25em;
                margin-right: 0.25em;
            }

    .iborrainputfile {
        font-size: 16px;
        font-weight: normal;
        font-family: 'Lato';
    }
    
    .inputfile-1 + label {
        color: #fff;
        background-color: #67be63;
    }

        .inputfile-1:focus + label,
        .inputfile-1.has-focus + label,
        .inputfile-1 + label:hover {
            background-color: #488545;
        }


    .btn-flotante {
        font-size: 16px; /* Cambiar el tamaño de la tipografia */
        text-transform: uppercase; /* Texto en mayusculas */
        font-weight: bold; /* Fuente en negrita o bold */
        color: #ffffff; /* Color del texto */
        border-radius: 5px; /* Borde del boton */
        letter-spacing: 2px; /* Espacio entre letras */
        background-color: #E91E63; /* Color de fondo */
        padding: 18px 30px; /* Relleno del boton */
        position: fixed;
        bottom: 40px;
        right: 40px;
        transition: all 300ms ease 0ms;
        box-shadow: 0px 8px 15px rgba(0, 0, 0, 0.1);
        z-index: 99;
    }

        .btn-flotante:hover {
            background-color: #2c2fa5; /* Color de fondo al pasar el cursor */
            box-shadow: 0px 15px 20px rgba(0, 0, 0, 0.3);
            transform: translateY(-7px);
        }



    .icono-placeholder {
        padding: 0.25em 0.6em;
        border-radius: 0.3rem;
        border: 1px solid #d3d6e4;
        text-align: left;
        box-shadow: 0 2px 3px rgba(0 0 0 / 0.15);
        /*width: 30% ;*/
        font-family: "Times New Roman";
        font-weight: 300;
    }


    .wrapper {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        grid-gap: 12px;
        padding: 10px;
    }

    #SlctGerentes {
        font-size: 12px
    }

    .button {
        background-color: #0088CC; /* Green */
        border: none;
        color: white;
        padding: 15px 32px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin: 4px 2px;
        cursor: pointer;
        -webkit-transition-duration: 0.4s; /* Safari */
        transition-duration: 0.4s;
    }

    .collapsible {
        background-color: #777;
        color: white;
        cursor: pointer;
        padding: 18px;
        width: 100%;
        border: none;
        text-align: left;
        outline: none;
        font-size: 15px;
    }

        .active, .collapsible:hover {
            background-color: #555;
        }

    .content {
        padding: 0 18px;
        display: none;
        overflow: hidden;
        background-color: #f1f1f1;
    }

    #btnDelete, #btnEdit, #btnView {
        border-radius: 10px;
        border: none;
        color: white;
        padding: 8px 15px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin: 4px 2px;
        cursor: pointer;
        -webkit-transition-duration: 0.4s; /* Safari */
        transition-duration: 0.4s;
    }
</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
@Styles.Render("~/bundles/alertify/css")
<br />
<br />
@if (ViewBag.usuarioLog != "")
{


    <form id="formV">
        <div class="container" style="text-align:center">
            <div style="text-align:right"> <h3>Version1.0</h3> </div>

            <h3> <u>Formulario de Reporte de Gastos <b>(RPG)</b></u> </h3>
            <div class="row">
                <div class="col-md-7"></div>
                <div class="col-md-4" style=" border-color:black; text-align:center">
                    <h3 style="font-family: 'Times New Roman'; border: 3px solid black;">SECUENCIAL: <b> 00000 @Model.secuencial</b></h3>
                </div>
            </div>


            <div class="row">
                <div class="col-md-6" style="text-align:center">


                    <label><b>Fecha de la Solicitud  : </b> </label>
                    <label>@Model.FechaSolicitud</label>

                </div>
                <div class="col-md-6">
                    <label><b>Status : </b> </label>
                    <label>@Model.Estatus</label>

                </div>

            </div>
            <br />
            <div class="row">
                <div class="col-md-2" style="text-align:left">

                    <label style="color:red"><b>Datos del Empleado <abbr style="color:red">*</abbr></b> </label>
                </div>
                <div class="col-md-3" style="text-align:left">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text" id="basic-addon1">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-person-circle" viewBox="0 0 16 16">
                                    <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z" />
                                    <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z" />
                                </svg>
                            </span>
                        </div>
                        <input type="number" name="codigoempleado" class="form-control" placeholder="Código empleado" id="codigoempleado" value="" />

                    </div>



                </div>
                <div class="col-md-3" style="text-align:left">

                    <button value="" type="button" class="btn btn-primary btn-lg" id="ConsultarEmpleado" onclick="CodigoEmpleado()" name="ConsultarEmpleado"><i class="fa fa-search"></i>  Consultar datos de Empleado</button>
                    @*<input class="btn btn-primary" type="button" id="ConsultarEmpleado" name="ConsultarEmpleado" value="Consultar datos de Empleado"> </input>*@
                </div>

            </div>
            <br />
            <div class="row">
                <div class="col-md-2" style="text-align:left">
                    <label><b>Nombre:</b></label>
                </div>
                <div class="col-md-3" style="text-align:left">

                    <input type="text" name="nombre" id="nombre" class="form-control" disabled value="" />
                </div>
                <div class="col-md-2" style="text-align:left">
                    <label><b>Departamento:</b></label>
                </div>
                <div class="col-md-4" style="text-align:left">

                    <input type="text" name="departamento" id="departamento" class="form-control" disabled value="" />
                </div>
            </div>
            <br />
            <div class="row">
                <div class="col-md-2" style="text-align:left">
                    <label><b>Compañía:</b></label>
                </div>
                <div class="col-md-3" style="text-align:left">

                    <input type="text" name="compania" id="compania" class="form-control" disabled value="" />
                </div>

                <div class="col-md-2" style="text-align:left">
                    <label><b>Centro de costos:</b></label>
                </div>
                <div class="col-md-4" style="text-align:left">

                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text" id="basic-addon1">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-people-fill" viewBox="0 0 16 16">
                                    <path d="M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1H7zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z" />
                                    <path fill-rule="evenodd" d="M5.216 14A2.238 2.238 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.325 6.325 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1h4.216z" />
                                    <path d="M4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5z" />
                                </svg>
                            </span>
                        </div>

                        <input type="text" name="centrocosto" id="centrocosto" class="form-control" disabled value="" />
                    </div>

                </div>
            </div>
            <br />
            <div class="row">
                <div class="col-md-2" style="text-align:left">
                    <label><b>Área:</b></label>
                </div>
                <div class="col-md-3" style="text-align:left">

                    <input type="text" name="area" id="area" class="form-control" disabled value="" />
                </div>


                <div class="col-md-2" style="text-align:left">

                    <label><b>Centro de costo cargado a:</b></label>
                </div>
                <div class="col-md-4" style="text-align:left">



                    <input type="checkbox" name="checkIn" id="checkIn" class="checkbox" onclick="checkIn1()" value="" />     &nbsp  &nbsp

                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text" id="basic-addon1">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-people-fill" viewBox="0 0 16 16">
                                    <path d="M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1H7zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z" />
                                    <path fill-rule="evenodd" d="M5.216 14A2.238 2.238 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.325 6.325 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1h4.216z" />
                                    <path d="M4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5z" />
                                </svg>
                            </span>
                        </div>
                        @Html.DropDownList("SlctCentroCostoa", null, htmlAttributes: new { @class = "form-control", @disabled = "disabled" })
                    </div>

                </div>

            </div>

            <div class="row">



                <div class="col-md-2" style="text-align:left">

                    <label id="af"><b>Autoridad Financiera: <abbr style="color:red">*</abbr></b></label>
                </div>
                <div class="col-md-3" style="text-align:left">

                    <div class="input-group mb-3">
                        <div class="input-group-prepend" id="afi">
                            <span class="input-group-text" id="basic-addon1">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-shield-shaded" viewBox="0 0 16 16">
                                    <path fill-rule="evenodd" d="M8 14.933a.615.615 0 0 0 .1-.025c.076-.023.174-.061.294-.118.24-.113.547-.29.893-.533a10.726 10.726 0 0 0 2.287-2.233c1.527-1.997 2.807-5.031 2.253-9.188a.48.48 0 0 0-.328-.39c-.651-.213-1.75-.56-2.837-.855C9.552 1.29 8.531 1.067 8 1.067v13.866zM5.072.56C6.157.265 7.31 0 8 0s1.843.265 2.928.56c1.11.3 2.229.655 2.887.87a1.54 1.54 0 0 1 1.044 1.262c.596 4.477-.787 7.795-2.465 9.99a11.775 11.775 0 0 1-2.517 2.453 7.159 7.159 0 0 1-1.048.625c-.28.132-.581.24-.829.24s-.548-.108-.829-.24a7.158 7.158 0 0 1-1.048-.625 11.777 11.777 0 0 1-2.517-2.453C1.928 10.487.545 7.169 1.141 2.692A1.54 1.54 0 0 1 2.185 1.43 62.456 62.456 0 0 1 5.072.56z" />
                                </svg>
                            </span>
                        </div>

                        @Html.DropDownList("SlctGerentes", null, htmlAttributes: new { @class = "form-control sel1" })


                    </div>



                    <label style="font-size:14px" id="afff"><input type="checkbox" name="CheckDirect" class="sel1" id="CheckDirect" onclick="CheckDirector()" value="" /><b> En ausencia del Gerente del Área que apruebe el Director del Área</b></label>
                </div>


                <div class="col-md-2" style="text-align:left;display:none" id="dir">
                    <label id="lblDirector"><b>Director:</b></label>
                </div>
                <div class="col-md-4" style="text-align:left;display:none" id="SlctDirectores">

                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text" id="basic-addon3">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-shield-shaded" viewBox="0 0 16 16">
                                    <path fill-rule="evenodd" d="M8 14.933a.615.615 0 0 0 .1-.025c.076-.023.174-.061.294-.118.24-.113.547-.29.893-.533a10.726 10.726 0 0 0 2.287-2.233c1.527-1.997 2.807-5.031 2.253-9.188a.48.48 0 0 0-.328-.39c-.651-.213-1.75-.56-2.837-.855C9.552 1.29 8.531 1.067 8 1.067v13.866zM5.072.56C6.157.265 7.31 0 8 0s1.843.265 2.928.56c1.11.3 2.229.655 2.887.87a1.54 1.54 0 0 1 1.044 1.262c.596 4.477-.787 7.795-2.465 9.99a11.775 11.775 0 0 1-2.517 2.453 7.159 7.159 0 0 1-1.048.625c-.28.132-.581.24-.829.24s-.548-.108-.829-.24a7.158 7.158 0 0 1-1.048-.625 11.777 11.777 0 0 1-2.517-2.453C1.928 10.487.545 7.169 1.141 2.692A1.54 1.54 0 0 1 2.185 1.43 62.456 62.456 0 0 1 5.072.56z" />
                                </svg>
                            </span>
                        </div>
                        @Html.DropDownList("SlctDirectores", null, htmlAttributes: new { @class = "form-control sel1", id = "SlctDirectores1" })
                    </div>


                </div>


            </div>

            <br />
            <div class="col-md-12" style="text-align:center">
                <h4> <u>Datos del reporte de gastos</u> </h4>
            </div>
            <br />
            <div class="row">

                <div class="col-md-2" style="text-align:left">

                    <label><b>Tipo:<abbr style="color:red">*</abbr></b></label>
                </div>
                <div class="col-md-4" style="text-align:left">

                    <select class="form-control slctTipo" id="slctTipo" name="slctTipo" disabled>
                        <option value="">-Seleccione-</option>
                        <option value="1">Justificación consumos TC corporativa</option>
                        <option value="2">Liquidación anticipo de efectivo</option>
                        <option value="3">Solicitar reembolso de gastos</option>
                    </select>
                </div>


            </div>
            <br />
            <div class="row">
                <div class="col-md-2" style="text-align:left">
                    <label> <b>Proposito del Gasto:<abbr style="color:red">*</abbr> </b></label>
                </div>
                <div class="col-md-4" style="text-align:left">

                    <textarea class="form-control" id="motivogasto" name="motivogasto"></textarea>
                </div>
                <div class="col-md-1">

                </div>
                <!--<div class="col-md-5" style="text-align:center">-->
                @*<label style="font-size:14px" id="facturaFisica"><input type="checkbox" name="checkfactura" id="checkfactura" onclick="CheckFactura()" value="" /><b> Adjuntar varias facturas físicas en un solo archivo. </b></label>*@


                <!--<input type="file" name="file-1" id="file-1" class="inputfile inputfile-1" data-multiple-caption="{count} archivos seleccionados" multiple />


            <label id="input" name="input" for="file-1" style="display:block">
                <svg xmlns="http://www.w3.org/2000/svg" class="iborrainputfile" width="10" height="10" viewBox="0 0 20 17"><path d="M10 0l-5.2 4.9h3.3v5.1h3.8v-5.1h3.3l-5.2-4.9zm9.3 11.5l-3.2-2.1h-2l3.4 2.6h-3.5c-.1 0-.2.1-.2.1l-.8 2.3h-6l-.8-2.2c-.1-.1-.1-.2-.2-.2h-3.6l3.4-2.6h-2l-3.2 2.1c-.4.3-.7 1-.6 1.5l.6 3.1c.1.5.7.9 1.2.9h16.3c.6 0 1.1-.4 1.3-.9l.6-3.1c.1-.5-.2-1.2-.7-1.5z"></path></svg>
                <span class="iborrainputfile">Seleccionar archivo</span>
            </label>



        </div>-->
            </div>
            <br />
            <div class="row">
                <div class="col-md-2" style="text-align:left">
                    <label><b>Desde: <abbr style="color:red">*</abbr></b></label>
                </div>
                <div class="col-md-3" style="text-align:left" id="mitad">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text" id="basic-addon1">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-calendar-check-fill" viewBox="0 0 16 16">
                                    <path d="M4 .5a.5.5 0 0 0-1 0V1H2a2 2 0 0 0-2 2v1h16V3a2 2 0 0 0-2-2h-1V.5a.5.5 0 0 0-1 0V1H4V.5zM16 14V5H0v9a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2zm-5.146-5.146-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708z" />
                                </svg>
                            </span>
                        </div>
                        <input type="date" name="fechadesde" id="fechadesde" class="form-control fechadh" value="" />
                    </div>

                </div>
                <div class="col-md-2" style="text-align:left">
                    <label><b>  Hasta: <abbr style="color:red">*</abbr></b></label>
                </div>
                <div class="col-md-4" style="text-align:left">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text" id="basic-addon1">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-calendar-check-fill" viewBox="0 0 16 16">
                                    <path d="M4 .5a.5.5 0 0 0-1 0V1H2a2 2 0 0 0-2 2v1h16V3a2 2 0 0 0-2-2h-1V.5a.5.5 0 0 0-1 0V1H4V.5zM16 14V5H0v9a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2zm-5.146-5.146-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708z" />
                                </svg>
                            </span>
                        </div>
                        <input type="date" name="fechahasta" id="fechahasta" class="form-control fechadh" value="" />
                    </div>

                </div>
            </div>
            <br />
            <hr />
            <div id="SlcttipoFae" style="display:none">

                <div class="row">
                    <div class="col-md-12" style="text-align:center">
                        <label><b>Datos de la liquidación de anticipo de efectivo</b></label>
                    </div>
                </div>
                <br />
                <div class="row">

                    <div class="col-md-3"><label><b>Anticipo a liquidar:</b> </label></div>
                    <div class="col-md-4">
                        @Html.DropDownList("SlctLiquidacionFae", null, htmlAttributes: new { @class = "form-control SlctLiquidacionFae" })
                    </div>

                </div>
                <br />

            </div>

            <div class="row">
                <div class="col-md-2">

                    <a href="#mitad" onclick="OcultarDetalle();" style="display:none;text-align:left" id="IdocultarD">
                        <svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" fill="currentColor" class="bi bi-eye-fill" viewBox="0 0 16 16">
                            <path d="M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z" />
                            <path d="M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8zm8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z" />
                        </svg>  Mostrar
                    </a>
                    <a href="#mitad" onclick="DesOcultarDetalle();" style="display:none;text-align:left" id="IdDesocultarD">
                        <svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" fill="currentColor" class="bi bi-eye-slash-fill" viewBox="0 0 16 16">
                            <path d="m10.79 12.912-1.614-1.615a3.5 3.5 0 0 1-4.474-4.474l-2.06-2.06C.938 6.278 0 8 0 8s3 5.5 8 5.5a7.029 7.029 0 0 0 2.79-.588zM5.21 3.088A7.028 7.028 0 0 1 8 2.5c5 0 8 5.5 8 5.5s-.939 1.721-2.641 3.238l-2.062-2.062a3.5 3.5 0 0 0-4.474-4.474L5.21 3.089z" />
                            <path d="M5.525 7.646a2.5 2.5 0 0 0 2.829 2.829l-2.83-2.829zm4.95.708-2.829-2.83a2.5 2.5 0 0 1 2.829 2.829zm3.171 6-12-12 .708-.708 12 12-.708.708z" />
                        </svg>  Ocultar
                    </a>

                </div>

            </div>


            <div id="ConsumoTc" style="display:none">
                <div class="row">
                    <div class="col-md-12" style="text-align:center">
                        <label>
                            <b> Datos de la Justificación de Consumos de la Tarjeta de Crédito Corporativa</b>
                        </label>
                    </div>
                    <div class="row">
                        <div class="col-md-2 offset-1">
                            <label>Corte:</label>
                        </div>
                        <div class="col-md-2">
                            <input type="number" class="form-control" id="corte" name="corte" value="" />
                        </div>
                        <div class="col-md-2">
                            <label>#TC:</label>
                        </div>
                        <div class="col-md-2">
                            <input type="number" class="form-control" id="Ntc" name="Ntc" value="" />
                        </div>
                        <div class="col-md-2 offset-1">
                            <button id="loadPartialView" type="button" class="btn btn-success">Cargar</button>
                        </div>
                    </div>

                </div>
                <br />
                <div class="row">
                    <div class="col-md-2" style="text-align:left">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" style="color:green" fill="currentColor" class="bi bi-check-circle-fill" viewBox="0 0 16 16">
                            <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z" />
                        </svg>
                        <label><b>  Justificado</b></label>
                    </div>


                </div>
                <div class="row">
                    <div class="col-md-2" style="text-align:left">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" style="color:red" fill="currentColor" class="bi bi-dash-circle-fill" viewBox="0 0 16 16">
                            <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM4.5 7.5a.5.5 0 0 0 0 1h7a.5.5 0 0 0 0-1h-7z" />
                        </svg>
                        <label><b> No justificado</b></label>
                    </div>


                </div>
                <div id="tarjetasCreditoContainer">



                </div>


            </div>

        
            <br />
            <div id="tipoReembolsoGastos" style="display:none">

                <div class="row">
                    <div class="col-md-12">
                        <h4 style="color:red; font-family:'Bodoni MT'"> DETALLES DEL CONSUMO</h4>
                    </div>

                    <div class="col-md-4" style="text-align:left;padding-left:40px">
                        <input type="checkbox" id="checkAtencionNegocios" style="font-size:50px" name="checkAtencionNegocios" value="" /> <label style="font-size: 19px"> <b>Atención de  negocios</b></label>
                    </div>
                </div>


                <div style="background-color: #F2F2F2; padding:15px">


                    <div class="row">



                        <div class="col-md-3" style="text-align:left">
                            <label>Tipo de Consumo: <abbr style="color:red">*</abbr></label>
                            @Html.DropDownList("tipoconsumo", null, htmlAttributes: new { @class = "form-control Monto", Styles = "font-size: 15px" })

                        </div>
                        <div class="col-md-2" style="text-align:left">
                            <label> Moneda: <abbr style="color:red; ">*</abbr></label>
                            @Html.DropDownList("slMoneda", null, htmlAttributes: new { @class = "js-example-basic-single calcularValor Moneda", name = "state" })

                        </div>


                        <div class="col-md-2" style="text-align:left">
                            <label>Monto: <abbr style="color:red">*</abbr></label>
                            <input type="number" style="font-size:17px" name="txtMonto" id="txtMonto" class="form-control  calcularValor Monto" value="" />

                        </div>

                        <div class="col-md-2" style="text-align:left">
                            <label>Tipo Cambio: <abbr style="color:red; ">*</abbr></label>

                            <div class="input-group mb-3">
                                <div class="input-group-prepend" width=" 12" height="12">
                                    <span class="input-group-text" id="basic-addon1">

                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" id="MGeneric" display="none" fill="currentColor" class="bi bi-dash-circle" viewBox="0 0 16 16">
                                            <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
                                            <path d="M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8z" />
                                        </svg>
                                        <svg xmlns="http://www.w3.org/2000/svg" display="none" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="MSol" x="0px" y="0px" width="17px" height="17px" viewBox="0 0 82.664 82.664" style="enable-background:new 0 0 82.664 82.664;" xml:space="preserve">
                                        <path d="M17.562,71.88c-5.634,0-12.358-1.67-15.988-3.971c-1.312-0.829-1.89-2.43-1.404-3.893l1.891-5.699     c0.324-0.988,1.117-1.791,2.119-2.139c0.979-0.332,2.065-0.211,2.93,0.313c3.063,1.864,7.051,2.933,10.945,2.933     c2.456,0,8.167-0.546,8.167-5.6c0-2.355-0.615-4.523-8.175-7.206C6.684,42.694,1.152,36.75,1.152,28.45     c0-10.401,8.776-17.666,21.342-17.666c7.612,0,12.221,2.106,13.849,3.013c1.45,0.81,2.101,2.519,1.546,4.064l-1.972,5.538     c-0.34,0.97-1.105,1.727-2.099,2.07c-0.996,0.334-2.024,0.218-2.881-0.283c-0.809-0.478-3.814-2.025-8.69-2.025     c-4.846,0-7.015,2.264-7.015,4.508c0,2.268,0.611,3.979,8.786,6.985c11.417,4.281,16.284,9.851,16.284,18.624     C40.304,61.858,34.348,71.88,17.562,71.88z M5.308,58.992c-0.053,0-0.104,0.009-0.15,0.024c-0.112,0.039-0.212,0.135-0.247,0.24     l-1.892,5.704c-0.051,0.151,0.016,0.321,0.161,0.413c3.153,1.998,9.337,3.505,14.384,3.505c14.57,0,19.74-8.403,19.74-15.603     c0-7.512-4.018-11.943-14.328-15.812c-8.13-2.99-10.742-5.372-10.742-9.798c0-3.737,3.097-7.508,10.015-7.508     c5.636,0,9.239,1.866,10.21,2.438c0.112,0.065,0.247,0.08,0.394,0.031c0.11-0.039,0.2-0.122,0.238-0.23l1.975-5.548     c0.06-0.165-0.016-0.343-0.182-0.436c-1.421-0.791-5.479-2.633-12.388-2.633c-10.8,0-18.342,6.031-18.342,14.666     c0,6.861,4.869,11.878,14.886,15.337c7.427,2.636,10.184,5.355,10.184,10.038c0,5.305-4.279,8.6-11.167,8.6     c-4.429,0-8.986-1.228-12.503-3.368C5.484,59.017,5.396,58.992,5.308,58.992z M46.973,71.05h-5.47     c-0.873,0-1.696-0.416-2.201-1.111c-0.527-0.73-0.641-1.662-0.307-2.491L61.4,13.192c0.404-1.003,1.389-1.658,2.502-1.658h5.637     c0.876,0,1.698,0.418,2.203,1.117c0.524,0.731,0.638,1.662,0.303,2.491L49.473,69.397C49.074,70.394,48.09,71.05,46.973,71.05z      M41.992,68.05h4.792l22.265-53.516h-4.956L41.992,68.05z M75.068,70.218h-0.082c-4.235,0-7.432-3.232-7.432-7.52     c0-4.289,3.266-7.523,7.596-7.523c4.283,0,7.514,3.234,7.514,7.523C82.664,66.985,79.398,70.218,75.068,70.218z M75.15,58.175     c-2.663,0-4.596,1.902-4.596,4.523c0,2.619,1.864,4.52,4.432,4.52h0.082c2.705,0,4.596-1.857,4.596-4.52     C79.664,60.035,77.809,58.175,75.15,58.175z" />
                                    </svg>

                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" display="none" id="MEuro" fill="currentColor" class="bi bi-currency-euro" viewBox="0 0 16 16">
                                            <path d="M4 9.42h1.063C5.4 12.323 7.317 14 10.34 14c.622 0 1.167-.068 1.659-.185v-1.3c-.484.119-1.045.17-1.659.17-2.1 0-3.455-1.198-3.775-3.264h4.017v-.928H6.497v-.936c0-.11 0-.219.008-.329h4.078v-.927H6.618c.388-1.898 1.719-2.985 3.723-2.985.614 0 1.175.05 1.659.177V2.194A6.617 6.617 0 0 0 10.341 2c-2.928 0-4.82 1.569-5.244 4.3H4v.928h1.01v1.265H4v.928z" />
                                        </svg>
                                        <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" display="none" id="MDolar" fill="currentColor" class="bi bi-currency-dollar" viewBox="0 0 17 17">
                                            <path d="M4 10.781c.148 1.667 1.513 2.85 3.591 3.003V15h1.043v-1.216c2.27-.179 3.678-1.438 3.678-3.3 0-1.59-.947-2.51-2.956-3.028l-.722-.187V3.467c1.122.11 1.879.714 2.07 1.616h1.47c-.166-1.6-1.54-2.748-3.54-2.875V1H7.591v1.233c-1.939.23-3.27 1.472-3.27 3.156 0 1.454.966 2.483 2.661 2.917l.61.162v4.031c-1.149-.17-1.94-.8-2.131-1.718H4zm3.391-3.836c-1.043-.263-1.6-.825-1.6-1.616 0-.944.704-1.641 1.8-1.828v3.495l-.2-.05zm1.591 1.872c1.287.323 1.852.859 1.852 1.769 0 1.097-.826 1.828-2.2 1.939V8.73l.348.086z" />
                                        </svg>





                                    </span>
                                </div>
                                <input type="number" name="txtTcambio" id="txtTcambio" style="text-align:center ; font-size:17px" class="form-control calcularValor Monto" value="" />

                            </div>

                        </div>





                        <div class="col-md-1" style="text-align:left">
                            <label>Invitados:</label>
                            <div style="text-align:center">
                                <button type="button" title="Agregar invitado" class="btn btn-success" onclick="GenerarInvitados();" style="border: none; background-color: #F2F2F2">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="35" style="color: #52B63F" height="35" fill="currentColor" class="bi bi-person-plus-fill" viewBox="0 0 16 16">
                                        <path d="M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z" />
                                        <path fill-rule="evenodd" d="M13.5 5a.5.5 0 0 1 .5.5V7h1.5a.5.5 0 0 1 0 1H14v1.5a.5.5 0 0 1-1 0V8h-1.5a.5.5 0 0 1 0-1H13V5.5a.5.5 0 0 1 .5-.5z" />
                                    </svg>
                                </button>
                            </div>
                            @*<input type="number" style="font-size:17px" name="txtInvitados" id="txtInvitados" onblur="" class="form-control " value="" />*@

                        </div>
                        <div class="col-md-2" style="text-align:center">
                            <label>Valor:</label>

                            <div class="input-group mb-3">
                                <div class="input-group-prepend">
                                    <span class="input-group-text" id="basic-addon1">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" fill="currentColor" class="bi bi-currency-dollar" viewBox="0 0 17 17">
                                            <path d="M4 10.781c.148 1.667 1.513 2.85 3.591 3.003V15h1.043v-1.216c2.27-.179 3.678-1.438 3.678-3.3 0-1.59-.947-2.51-2.956-3.028l-.722-.187V3.467c1.122.11 1.879.714 2.07 1.616h1.47c-.166-1.6-1.54-2.748-3.54-2.875V1H7.591v1.233c-1.939.23-3.27 1.472-3.27 3.156 0 1.454.966 2.483 2.661 2.917l.61.162v4.031c-1.149-.17-1.94-.8-2.131-1.718H4zm3.391-3.836c-1.043-.263-1.6-.825-1.6-1.616 0-.944.704-1.641 1.8-1.828v3.495l-.2-.05zm1.591 1.872c1.287.323 1.852.859 1.852 1.769 0 1.097-.826 1.828-2.2 1.939V8.73l.348.086z" />
                                        </svg>


                                    </span>
                                </div>
                                <input type="text" disabled style="text-align: right ; font-size:17px ; background-color:white; border-style:dotted;border-color:red" name="valor" id="valor" class="form-control valor" value="" />

                            </div>

                        </div>
                    </div>



                    <div id="Generate1" style="display:none" class="col-md-12">


                        <div class="col-md-2"></div>
                        <div class="wrapper" style="background-color:#FCFAFA" id="Generate">






                        </div>

                    </div>

                    <div class="row" style="padding-top:30px">

                        <div class="col-md-2 col-lg-2" style="text-align:left">
                            <label id="lbltipoprovedor">Tipo Proveedor: <abbr style="color:red">*</abbr></label>
                            <select class="form-control Monto" style="font-size: 15px" id="tipoproveedor" name="tipoproveedor" disabled>
                                <option value=""></option>
                                <option value="0">Nacional</option>
                                <option value="1">Exterior</option>
                            </select>

                        </div>
                        <div class="col-md-2 col-lg-2" style="text-align:left">
                            <label id="lblrucproveedor">Ruc Proveedor:@*<abbr style="color:red; ">*</abbr>*@</label>
                            <input type="number" style="font-size: 15px" name="rucproveedor" id="rucproveedor" class="form-control RucVal" value="" />
                            <div style="text-align:right">
                                <a href="#" id="btnaddProveedor" onclick="AddProveedor();" data-toggle="modal" title="Add Proveedor" data-target="#btnaddProoveedor" style="color: #67BE63;display:none">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="bi bi-person-plus-fill" viewBox="0 0 16 16">
                                        <path d="M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z" />
                                        <path fill-rule="evenodd" d="M13.5 5a.5.5 0 0 1 .5.5V7h1.5a.5.5 0 0 1 0 1H14v1.5a.5.5 0 0 1-1 0V8h-1.5a.5.5 0 0 1 0-1H13V5.5a.5.5 0 0 1 .5-.5z" />
                                    </svg>
                                </a>
                            </div>

                        </div>


                        <div class="col-md-4 col-lg-4" style="text-align:left">


                            <label id="lblrazonsocial">Razon Social:@*<abbr style="color:red; ">*</abbr>*@</label>
                            <input type="text" style="font-size: 15px" name="razonsocial" id="razonsocial" class="form-control" value="" disabled />

                        </div>

                        <div class="col-md-3 col-lg-3 col-sm-3 offset-sm-1 offset-lg-0 offset-md-0 " style="text-align:left;margin:10px;background-color:white; border-radius:6px;border:1px solid #B1B1B1;height:100%;padding:16px;box-sizing:border-box">

                            <div class="file-container">
                                <label><b>Pdf - Imágenes</b></label>
                            </div>
                            <div>
                                <input type="file" class="form-control-file" name="fileRPG" id="fileRPG" value="" accept="image/*,application/pdf" />
                            </div>
                        </div>




                    </div>

                    <br />
                    <div class="row">
                        <div class="col-md-2" style="text-align:left">
                            <label id="lbltipofactura">Tipo Factura:<abbr style="color:red;">*</abbr></label>
                            <select class="form-control" id="tipofactura" name="tipofactura">
                                <option value=""></option>
                                <option value="1">Física</option>
                                <option value="2">Electronica</option>
                            </select>
                        </div>
                        <div class="col-md-2" style="text-align:left">
                            <label id="lblfactura">N.º Factura:</label>
                            <input type="number" name="numerofactura" id="numerofactura" class="form-control" value="" />

                        </div>
                        <div class="col-md-3" style="text-align:left">
                            <label>Fecha del consumo:  <abbr style="color:red">*</abbr></label>
                            <input type="date" name="fechafactura" id="fechafactura" class="form-control" value="" />

                        </div>
                        <div class="col-md-1">

                        </div>
                        <div class="col-md-4" style="text-align:center" title="Agregar consumo">


                            <svg xmlns="http://www.w3.org/2000/svg" style="color: #52B63F; cursor:pointer" id="btnAdd" width="120" height="120" fill="currentColor" class="bi bi-check-circle-fill" viewBox="0 0 16 16">
                                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z" />
                            </svg>


                        </div>

                    </div>


                    <div class="row" style="padding-top:20px">

                        <div class="col-md-2" style="text-align:left">
                            <label> <b>Observacion: </b></label>
                        </div>
                        <div class="col-md-6" style="text-align:left">

                            <textarea class="form-control" id="descripcionGastos"></textarea>
                        </div>
                        <div class="col-md-3">
                            <div id="imageContainer"></div>
                        </div>

                    </div>
                </div>
                <br />

                <div class="col-md-12" style="text-align: center"><label style="color:red; font-size:22px"> <b>Consumos Agregados</b></label> </div>


                <div class="row">
                    <div class="col-md-12">
                        <div class="d-flex">

                            <button type="button" class="btn btn-primary btn-sm mr-2" id="editar" onclick="EditConsumo();" disabled>EDITAR</button>

                            <button type="button" class="btn btn-danger btn-sm" id="eliminar" onclick="EliminarDataTable();" disabled>ELIMINAR</button>
                        </div>
                    </div>
                </div>


                <br />
                <div class="table-responsive">
                    <table id="tabla-DetalleRG" class="table table-striped table-bordered" style="border-radius:6px">
                        <thead>


                            <tr style="background-color: #E2E0E0; color: black;text-align:center">

                                <th></th>
                                <th></th>
                                <th></th>

                                <th></th>
                                <th></th>
                                <th></th>

                                <th></th>
                                <th></th>
                                <th></th>
                                <th></th>

                                <th></th>
                                <th></th>
                                <th></th>
                                <th></th>
                                <th></th>

                            </tr>
                        </thead>
                        <tbody style="background-color: white;text-align:center ">
                        </tbody>
                    </table>
                </div>
                <div class="row">
                    <div style="text-align:left"> <label><b><svg style="background-color: #F4B084" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-circle-fill" viewBox="0 0 16 16">< circle cx = "8" cy = "8" r = "8" /></svg> Detalles con excepción</b> (No adjunta soporte)</label> </div>
                    <div class="col-md-12" id="tbl_list">


                        <br />


                    </div>

                </div>

            </div>


        

     
       

            <br />  <br />   <br />
            <div id="tipoFae" style="display:none">
                <div class="row">
                    <div class="col-md-3" style="text-align:left">

                    </div>
                    <div class="col-md-2" style="text-align:right">


                    </div>
                    <div class="col-md-2"></div>
                    <div class="col-md-2" style="text-align:left">
                        <label><b>Anticipo efectivo</b></label>
                    </div>
                    <div class="col-md-3" style="text-align:right">
                        <label id="AnticipoEfectivo"> $0,00</label>

                    </div>


                </div>
            </div>


            <div class="row">
                <div class="col-md-3" style="text-align:left">
                    <label><b>Consumos Nacionales</b></label>
                </div>
                <div class="col-md-2" style="text-align:right">
                    <label id="valorNacional"> $0,00</label>

                </div>
                <div class="col-md-2"></div>
                <div class="col-md-2" style="text-align:left">
                    <label><b>Valor reportado</b></label>
                </div>
                <div class="col-md-3" style="text-align:right">
                    <label id="valorReportado"> $0,00</label>

                </div>


            </div>


            <div class="row">
                <div class="col-md-3" style="text-align:left">
                    <label><b>Consumos Exterior</b></label>
                </div>
                <div class="col-md-2" style="text-align:right">
                    <label id="valorExterior"> $0,00</label>

                </div>
                <div class="col-md-2"></div>
                <div class="col-md-3" style="text-align:left">
                    <label><b>Saldo a favor/ (en contra)</b></label>
                </div>
                <div class="col-md-2" style="text-align:right">
                    <label id="valor2"> $0,00</label>

                </div>


            </div>
            <div class="row">
                <div class="col-md-3" style="text-align:left">
                    <label><b>Consumos Combustible</b></label>
                </div>
                <div class="col-md-2" style="text-align:right">
                    <label id="valorCombustible"> $0,00</label>

                </div>


            </div>
            <div class="row">
                <div class="col-md-3" style="text-align:left">
                    <label><b>Servicios Financieros</b></label>
                </div>
                <div class="col-md-2" style="text-align:right">
                    <label id="valorServicios"> $0,00</label>

                </div>


            </div>

            <br />
            <div class="col-md-12" style="text-align:center">
                <h4> <u>Registro de aprobaciones</u> </h4>
            </div>
            <br />
            <div class="row">
                <div class="col-md-1"> <label><b>Nivel 1:</b></label></div>
                <div class="col-md-10"> <textarea id="txtareanivel1" class="form-control" disabled>maria.mawyin@dole.com</textarea></div>
            </div>
            <br />
            <div class="row">
                <div class="col-md-1"> <label><b>Nivel 2:</b></label></div>
                <div class="col-md-10"> <textarea id="txtareanivel2" class="form-control" disabled></textarea></div>
            </div>
            <br />
            <div class="row">
                <div class="col-md-1"> <label><b>Nivel 3:</b></label></div>
                <div class="col-md-10"> <textarea id="txtareanivel3" class="form-control" disabled></textarea></div>
            </div>
            <br />
            <div class="row">
                <div class="col-md-12" style="text-align:center">
                    <button value="" type="button" class="btn btn-primary btn-lg" onclick="Guardar('G');" style="margin-right:40px">
                        <i class="fa fa-save"></i>
                        Guardar
                    </button>

                    <button value="" type="button" class="btn btn-primary btn-lg" onclick="Guardar('P');"><i class="fa fa-paper-plane"></i>  Enviar</button>
                </div>
            </div>

            <br />

        </div>

            <div class="modal fade" id="detConsumo" tabindex="-1" role="dialog" aria-labelledby="smallModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header" style="background-color: #495057">

                            <h4 class="modal-title" id="smallModalLabel" style="font-family:'Times New Roman';color:white">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-border-width" viewBox="0 0 16 16">
                                    <path d="M0 3.5A.5.5 0 0 1 .5 3h15a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5H.5a.5.5 0 0 1-.5-.5v-2zm0 5A.5.5 0 0 1 .5 8h15a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5H.5a.5.5 0 0 1-.5-.5v-1zm0 4a.5.5 0 0 1 .5-.5h15a.5.5 0 0 1 0 1H.5a.5.5 0 0 1-.5-.5z" />
                                </svg>
                                Detalles Consumo
                            </h4>
                            <button type="button" style="color:white" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        </div>
                        <div class="modal-body" id="sectionDetConsumo">

                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-light" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>



            <div class="modal fade" id="detInvitados" tabindex="-1" role="dialog" aria-labelledby="smallModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header" style="background-color: #495057">

                            <h4 class="modal-title" id="smallModalLabel" style="font-family:'Times New Roman';color:white">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-border-width" viewBox="0 0 16 16">
                                    <path d="M0 3.5A.5.5 0 0 1 .5 3h15a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5H.5a.5.5 0 0 1-.5-.5v-2zm0 5A.5.5 0 0 1 .5 8h15a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5H.5a.5.5 0 0 1-.5-.5v-1zm0 4a.5.5 0 0 1 .5-.5h15a.5.5 0 0 1 0 1H.5a.5.5 0 0 1-.5-.5z" />
                                </svg>
                                Detalles Invitados
                            </h4>
                            <button type="button" style="color:white" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        </div>
                        <div class="modal-body" id="sectionDetInvitados">

                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-light" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>

</form>



    <br />


    <div id="secti">
        <div class="modal fade" id="btnaddProoveedor" tabindex="-1" role="dialog" aria-labelledby="smallModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header" style="background-color: #2D343D ">
                        <h4 class="modal-title" id="smallModalLabel" style="font-family:'Times New Roman';color:white">
                            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-person-plus-fill" viewBox="0 0 16 16">
                                <path d="M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z" />
                                <path fill-rule="evenodd" d="M13.5 5a.5.5 0 0 1 .5.5V7h1.5a.5.5 0 0 1 0 1H14v1.5a.5.5 0 0 1-1 0V8h-1.5a.5.5 0 0 1 0-1H13V5.5a.5.5 0 0 1 .5-.5z" />
                            </svg>    Agregar Proveedor
                        </h4>
                        <button type="button" class="close" data-dismiss="modal" style="color:white" aria-hidden="true">&times;</button>
                    </div>
                    <div class="modal-body" id="sectionAddProveedor">

                    </div>
                    <div class="modal-footer" style="background-color: #2D343D ">
                        <button type="button" style="border-radius:30px" class="btn btn-light-2" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

}
else
{

    <div class="container" style="text-align:center">
        <h4>Inicie sesión para continuar</h4>
    </div>

}




@section Scripts {
    @Scripts.Render("~/bundles/alertify")
    @Scripts.Render("~/bundles/SRG")
    <link href="~/Content/CustomSelect.css" rel="stylesheet" />
    <script type="text/javascript">
        var filaseleccionadaInvi = false;
        var secuencialRPG = @Model.secuencial;
        var totalfae = 0;
        var idArchivo;
   
        var DetConsumo = {

            codigoEmpleado: "",
            motivogasto:"",
            slctTipo: "",
            destino: "",
            IdAutoridadFinanciera: "",
            IdDirector: "",
            fechadesde: "",
            fechahasta:"",
            CodCentroCosto: "",
            CentroCosto: "",
            secuencial:@Model.secuencial,
            DetallConsumo: [],
            totalfae: ""

        }




        var nametablaRPG = "#tabla-DetalleRG";
        var miTablaRPG;

        $(document).ready(function () {
            miTablaRPG = $(nametablaRPG).DataTable({
                columns: [

                    { title: "Tipo Consumo" },
                    { title: "Moneda" },
                    { title: "Cambio" },
                    { title: "Monto" },
                    { title: "Destino" },
                    { title: "Valor" },
                    { title: "Tipo proveedor" },
                    { title: "Ruc" },
                    { title: "Razon Social" },
                    { title: "Tipo Factura" },
                    { title: "Factura" },
                    { title: "Fecha Factura", width: "150px" },
                    { title: "Descripcion Gastos" },
                    { title: "Archivo" },
                    { title: "Invitados" }

                ],
                columnDefs: [
                    {
                        targets: 1,
                        className: 'nowrap',
                        createdCell: function (td, cellData, rowData, row, col) {
                            $(td).css('width', '100px');
                        }
                    },
                    {
                        targets: 11,
                        className: 'nowrap',
                        createdCell: function (td, cellData, rowData, row, col) {
                            $(td).css('width', '150px');
                        }
                    }
                ],
                drawCallback: function () {
                    $('.table-responsive').css('overflow-x', 'auto');
                },
                rowCallback: function (row, data, dataIndex) {
                    if (data[5] > 15 && data[18] == null) {
                        $(row).css('background-color', '#F4B084');
                    }

                }
            });


        });

         var contInv = 0;
        var contInput = 0;
    var contDetall = 0;
/*    let messageElementSol;*/
/*    var editar = 1;*/

    $(document).ready(function () {
        messageElementSol = $('#divMessageSol');


    });



        var empleado = {}
        var ListaDirectores = {
            Codigo: "",
            Nombre:""
    }
/*    GenerateInputFile();*/


        var secuen = @Model.secuencial;


        var select = document.querySelector("#SlctGerentes");
        const aa = select.selectedIndex;

        var LstCantDr = document.getElementById('SlctDirectores1').length -1;
        function CheckFactura() {
            if (document.getElementById("checkfactura").checked == true) {
                document.getElementById("input").style.display = "block";
            } else {
                document.getElementById("input").style.display = "none";
            }
        }


    $(document).on('change', '.Imagenes', function () {

        var file = $("#fileJPG-" + contInput).get(0);

        document.getElementById("divPdf").style.display = "none";

        readURL(file);

    });
    $(document).on('change', '.Pdfs', function () {

        var file = $("#filePDF-" + contInput).get(0);
        document.getElementById("divJPG").style.display = "none";

        readURL(file);

    });







        var obj1 = {

            idtipoconsumo: ""
        };

        function OcultarDetalle() {
            document.getElementById("tipoReembolsoGastos").style.display = "block";
            document.getElementById("IdocultarD").style.display = "none";
            document.getElementById("IdDesocultarD").style.display = "block";
        }
        function DesOcultarDetalle() {


            document.getElementById("tipoReembolsoGastos").style.display = "none";
            document.getElementById("IdocultarD").style.display = "block";
            document.getElementById("IdDesocultarD").style.display = "none";

        }








        document.getElementById("fileRPG").addEventListener("change", clearImageContainer);


        function EliminarDataTable() {

            var filaSeleccionada = miTablaRPG.row('.selected');
            if (!filaSeleccionada.any()) {
                alert('Por favor seleccione una fila para eliminar.');
                return;
            }
            filaSeleccionada.remove().draw();
            $('#editar').prop('disabled', true);
            $('#eliminar').prop('disabled', true);
            var tableData = miTablaRPG.rows().data();
            calcularValores(tableData);
        }


        // Maneja el evento click en un tr de la tabla
        $('#tabla-DetalleRG tbody').on('click', 'tr', function () {

            // Comprueba si la tabla tiene datos
            if (miTablaRPG.data().any()) {

                // Deselecciona todas las filas de la tabla
                miTablaRPG.$('tr.selected').removeClass('selected');

                // Selecciona la fila actual
                $(this).addClass('selected');
                filaseleccionadaInvi = true;
                var data = miTablaRPG.row(this).data();
                console.log("lololo")
                console.log(data)
                DetConsumo.DetallConsumo.idtipoconsumo = data[15];
                DetConsumo.DetallConsumo.idmoneda = data[16];
                DetConsumo.DetallConsumo.tcambio = data[2];
                DetConsumo.DetallConsumo.monto = data[3];
                DetConsumo.DetallConsumo.valor = data[5];
                DetConsumo.DetallConsumo.rucproveedor = data[7];
                DetConsumo.DetallConsumo.razonsocial = data[8];
                DetConsumo.DetallConsumo.numerofactura = data[10];
                DetConsumo.DetallConsumo.fechafactura = data[11];
                DetConsumo.DetallConsumo.descripcionGastos = data[12];
                DetConsumo.DetallConsumo.Cantinvitados = data[14];
                DetConsumo.DetallConsumo.idtipoproveedor = data[20];
                DetConsumo.DetallConsumo.idtipofactura = data[21];
                DetConsumo.DetallConsumo.ArrayInvitados = data[19];
                DetConsumo.DetallConsumo.fileURL = data[18];
                DetConsumo.DetallConsumo.inputfile = data[22];


                $('#editar').prop('disabled', false);
                $('#eliminar').prop('disabled', false);


            }


        });



        function openModal(num) {
            if (filaseleccionadaInvi) {
                $("#detInvitados").modal("show");

                Invitados()
            } else {
                toastr.warning("Selecciona una fila.")
            }
        }


        $("#btnAdd").click(async function () {
            if ($("#formV").valid()) {


                if ($("#fechafactura").val() >= $("#fechadesde").val() && $("#fechafactura").val() <= $("#fechahasta").val()) {

                    var idtipoconsumo = $("#tipoconsumo option:selected").val();
                    var tipoconsumo = $("#tipoconsumo option:selected").text();
                    var idmoneda = $("#slMoneda option:selected").val();
                    var moneda = $("#slMoneda option:selected").text();
                    var tcambio = $("#txtTcambio").val();
                    var monto = $("#txtMonto").val();
                    var destinoD = $("#tipoproveedor option:selected").text();
                    var valor = $("#valor").val();
                    var tipoproveedor = $("#tipoproveedor option:selected").text();
                    var idtipoproveedor = $("#tipoproveedor option:selected").val();
                    var rucproveedor = $("#rucproveedor").val();
                    var razonsocial = $("#razonsocial").val();
                    var tipofactura = $("#tipofactura option:selected").text();
                    var idtipofactura = $("#tipofactura option:selected").val();
                    var factura = $("#numerofactura").val();
                    var fechafactura = $("#fechafactura").val();
                    var descripcionGastos = $("#descripcionGastos").val();
                    var IddestinoD = $("#tipoproveedor option:selected").val();
                    var imageContainer = document.getElementById("imageContainer");
                    var imageLink = imageContainer.querySelector("a");
                    var existingImageURL = imageLink ? imageLink.href : null;
                    var inputFile = document.getElementById("fileRPG");
                    var archivoprueba = $("#fileRPG")[0].files[0];
                    var fileURL = inputFile.files.length > 0 ? URL.createObjectURL(inputFile.files[0]) : existingImageURL;
                    var recopilarInvitados2 = recopilarInvitados();
                    var Cantinvitados = '<td><button type="button" class="btn btn-success" id="openModalButton" onclick="openModal(' + recopilarInvitados2.length + ')">' + recopilarInvitados2.length + '</button></td>';



                    // Resto de tu código...

                    // Agrega el archivo a la tabla como una nueva columna
                    var fileThumbnail = fileURL ? '<a href="' + fileURL + '" target="_blank"><img src="' + fileURL + '" style="width: 100%; height: auto;"/></a>' : 'No hay archivo';

                    miTablaRPG.$('tr.selected').removeClass('selected');


                        var data = [
                            tipoconsumo,
                            moneda,
                            tcambio,
                            monto,
                            destinoD,
                            valor,
                            tipoproveedor,
                            rucproveedor,
                            razonsocial,
                            tipofactura,
                            factura,
                            fechafactura,
                            descripcionGastos,
                            fileThumbnail,
                            Cantinvitados,
                            idtipoconsumo,
                            idmoneda,
                            IddestinoD,
                            fileURL,
                            recopilarInvitados2,
                            idtipoproveedor,
                            idtipofactura,
                            inputFile,
                            archivoprueba
                        ];
                    miTablaRPG.row.add(data).draw();

                    toastr.success("Consumo agregado.");
                    $("#slctTipo").prop("disabled", true);


                    contInv = 0;

                    // Accede a los datos de la tabla
                    var tableData = miTablaRPG.rows().data();
                    clearImageContainer();

                    LimpiarVariable();
                    EliminarInvitado(4555);
                    calcularValores(tableData);
                    //document.getElementById("divPdf").style.display = "block";
                    //document.getElementById("tipoReembolsoGastos").style.display = "none";
                    document.getElementById("IdDesocultarD").style.display = "none";
                    document.getElementById("IdocultarD").style.display = "block";
                    document.getElementById("checkAtencionNegocios").checked = false;


                } else {
                        toastr.warning("La fecha de la factura no esta en el rango permitido")
                    }
            } else {
                    toastr.error("LLene los campos requeridos.");

                    document.getElementById("btnAdd").style.color = "#CD6155";

                }
        });



            @*function DetalleConsumo(element) {
                var imagen = DetConsumo.DetallConsumo[element].inputfile;

                $('#sectionDetConsumo').empty();


                if (DetConsumo.DetallConsumo.length > 0) {

                            var request = $.ajax({
                                url: "@Url.Action("_DetalleConsumo", "PIC")",
                                type: "POST",
                                data: JSON.stringify(DetConsumo.DetallConsumo[element]),
                                dataType: "Html",
                                contentType: "application/json; charset=utf-8"
                            });
                            request.done(function (response) {
                                $('#sectionDetConsumo').append(response);
                                var file = $("#"+imagen).get(0);
                                readURL(file);

                            });
                            request.fail(function (jqXHR, textStatus) {
                                alert("Proceso no realizado: " + textStatus);
                            });

                }

    };*@


        function Invitados() {

            if (filaseleccionadaInvi) {

                $('#sectionDetInvitados').empty();


                console.log(DetConsumo.DetallConsumo.ArrayInvitados);

                var request = $.ajax({
                    url: "@Url.Action("_DetalleInvitados", "PIC")",
                    type: "POST",
                    data: JSON.stringify(DetConsumo.DetallConsumo.ArrayInvitados),
                    dataType: "Html",
                    contentType: "application/json; charset=utf-8"
                });

                request.done(function (response) {

                    $('#sectionDetInvitados').append(response);

                    filaseleccionadaInvi = false;
                });


                request.fail(function (jqXHR, textStatus) {
                    alert("Proceso no realizado: " + textStatus);

                });






            } else {
                toastr.warning("Seleccione un fila")
            }





        }
        $(document).on('change', '.sel1', function () {



            var obj = {
                Codigocorreo :""

            };
            var cod = "";
            if (document.getElementById("CheckDirect").checked == true || $("#SlctDirectores1 option:selected").val() != 0) {
                if ($("#SlctDirectores1 option:selected").val() != 0) {
                    cod= $("#SlctDirectores1 option:selected").val()

                } else {
                    $("#txtareanivel2").val("");


                }
            } else {


                if ($("#SlctGerentes option:selected").val() != 0 || $("#SlctGerentes option:selected").val() == undefined) {
                    cod = $("#SlctGerentes option:selected").val()



                } else {
                    /*  $("#txtareanivel2").val("");*/
                    cod = $("#SlctDirectores option:selected").val()
                }
            }
            obj.Codigocorreo = cod;
            console.log(cod);

            if (obj.Codigocorreo != "") {

                   var request = $.ajax({
                    url: "@Url.Action("CargarCorreo", "PIC")",
                    type: "POST",
                    data: JSON.stringify(obj),
                    dataType: "html",
                    contentType: "application/json; charset=utf-8"
                    });
                      request.done(function (tpm) {
                          $("#txtareanivel2").val(tpm);
                      });
                      request.fail(function (jqXHR, textStatus) {
                            alert("Proceso no realizado: " + textStatus);

                      });


            }








        });


        function SlctLiquidacionFae() {

        var obj = {
            idFaee : $("#SlctLiquidacionFae option:selected").val()
            }
           
            if ($("#slctTipo option:selected").val() === "2") {

                     var request = $.ajax({
                    url: "@Url.Action("TotalFae", "PIC")",
                    type: "POST",
                    data: JSON.stringify(obj),
                    dataType: "html",
                    contentType: "application/json; charset=utf-8"
                    });
                request.done(function (mensaje) {
                    console.log(mensaje)

                         totalfae = mensaje;
                             document.getElementById('AnticipoEfectivo').innerHTML = "$ " + mensaje;


                      });
                      request.fail(function (jqXHR, textStatus) {
                            alert("Proceso no realizado: " + textStatus);

                      });

            }


        }
    $(document).on('change', '.SlctLiquidacionFae', function () {

        SlctLiquidacionFae();
    });




    $(document).on('change', '.slctTipo', function () {
        const tipodoc = $("#slctTipo option:selected").val();
        resetDisplay();

        if (tipodoc === "3") {
            showTipo3();
        } else if (tipodoc === "2") {
        
            showTipo2();
            SlctLiquidacionFae();
          
        } else if (tipodoc === "1") {
            showTipo1();
        }
    });

    function resetDisplay() {
        $("#IdocultarD, #IdDesocultarD, #tipoReembolsoGastos, #tipoFae, #SlcttipoFae, #ConsumoTc").hide();
    }

    function showTipo3() {
        $("#IdocultarD").hide();
        $("#IdDesocultarD, #tipoReembolsoGastos").show();
    }

    function showTipo2() {
        $("#IdocultarD").hide();
        $("#IdDesocultarD, #tipoReembolsoGastos, #tipoFae, #SlcttipoFae").show();
    }

    function showTipo1() {
        $("#IdocultarD, #IdDesocultarD").hide();
        $("#ConsumoTc").show();
    }



      $(document).ready(function () {
        $("#loadPartialView").click(function () {
            const corte = $("#corte").val();
            const ntc = $("#Ntc").val();
            const codEmpleado = $("#codigoempleado").val();

            $.ajax({
                url: '@Url.Action("CargarTarjetasCredito", "PIC")',
                data: { corte: corte, ntc: ntc, codEmpleado: codEmpleado },
                type: 'GET',
                success: function (result) {
                    $("#tarjetasCreditoContainer").html(result);
                },
                error: function (xhr, status, error) {
                    alert("Error al cargar el PartialView: " + error);
                }
            });
        });
    });

    $(document).on('change', '.Monto', function () {

            var settings = $('#formV').validate().settings;

            var tconsumo = $("#tipoconsumo option:selected").val();
            var tproveedor = $("#tipoproveedor option:selected").val();

            var monto = $("#valor").val()

            if (monto < 0 || monto > 10000) {

                if (monto <= 0) {

                    toastr.warning("Monto ingresado debe ser mayor a 0")
                } else {
                    toastr.warning("Monto ingresado no puede ser mayor a 10000")
                }


               /* $("#valor").val("")*/
                $("#txtMonto").val("")
            } else {


                if (monto <= 15 || tconsumo == 9 || tconsumo == 10 || tconsumo == 11 || tconsumo == 12 || tproveedor == 2) {




                    if (tproveedor == 2 || monto <= 15) {
                        delete settings.rules.rucproveedor;
                        $('#lblrucproveedor').html("Ruc Proveedor:");
                        delete settings.rules.razonsocial;
                        $('#lblrazonsocial').html("Razon Social:");

                    } else {
                        $.extend(settings, {
                            rules: {
                                codigoempleado: {
                                    required: true
                                },
                                tipoconsumo: {
                                    required: true,
                                    min: 1

                                }, motivogasto: {
                                    required: true
                                },
                                slMoneda: {
                                    required: true
                                },

                                txtMonto: {
                                    required: true

                                },
                                tipoproveedor: {
                                    required: true
                                },
                                rucproveedor: {
                                    required: true
                                },
                                razonsocial: {
                                    required: true
                                },
                                txtTcambio: {
                                    required: true
                                },
                                slDestino: {
                                    required: true
                                },
                                 fechafactura: {
                                    required: true
                                },
                                tipofactura: {
                                    required: true
                                },
                                fechadesde: {
                                    required: true
                                },
                                fechahasta: {
                                    required: true
                                }, motivogasto: {
                                    required: "Campo requerido"
                                },
                            },
                            messages: {
                                codigoempleado: "Campo requerido",
                                tipoconsumo: "Campo requerido",
                                motivogasto: "Campo requerido",
                                slMoneda: "Campo requerido",
                                txtMonto: "Campo requerido",
                                tipoproveedor: "Campo requerido",
                                rucproveedor: "Campo requerido",
                                razonsocial: "Campo requerido",
                                txtTcambio: "Campo requerido",
                                slDestino: "Campo requerido",
                                fechafactura: "Campo requerido",
                                tipofactura: "Campo requerido",
                                 fechadesde:  "Campo requerido",
                                fechahasta: "Campo requerido",
                                motivogasto: "Campo requerido"

                            }
                        });


                        $('#lblrazonsocial').html("Razon Social: <abbr style='color: red;' >*</abbr>");
                        $('#lblrucproveedor').html("Ruc Proveedor: <abbr style='color: red;' >*</abbr>");
                        $('#lbltipofactura').html("Tipo Factura: <abbr style='color: red;' >*</abbr>");

                    }

                    if (monto <= 15 || tconsumo == 9 || tconsumo == 10 || tconsumo == 11 || tconsumo == 12) {
                        delete settings.rules.numerofactura;
                        $('#lblfactura').html("N.º Factura:");
                    } else {
                        $.extend(settings, {
                            rules: {
                                codigoempleado: {
                                    required: true
                                },
                                tipoconsumo: {
                                    required: true,
                                    min: 1

                                }, motivogasto: {
                                    required: true
                                },
                                slMoneda: {
                                    required: true
                                },

                                txtMonto: {
                                    required: true

                                },
                                tipoproveedor: {
                                    required: true
                                },

                                txtTcambio: {
                                    required: true
                                },
                                slDestino: {
                                    required: true
                                },
                                numerofactura: {
                                    required: true
                                }, fechafactura: {
                                    required: true
                                },
                                tipofactura: {
                                    required: true
                                },
                                fechadesde: {
                                    required: true
                                },
                                fechahasta: {
                                    required: true
                                },
                            },
                            messages: {
                                codigoempleado: "Campo requerido",
                                tipoconsumo: "Campo requerido",
                                motivogasto: "Campo requerido",
                                slMoneda: "Campo requerido",
                                txtMonto: "Campo requerido",
                                tipoproveedor: "Campo requerido",

                                txtTcambio: "Campo requerido",
                                slDestino: "Campo requeridoooo",
                                numerofactura: "Campo requerido",
                                fechafactura: "Campo requerido",
                                tipofactura: "Campo requerido",
                                fechadesde: "Campo requerido",
                                fechahasta: "Campo requerido"
                            }
                        });

                        $('#lblfactura').html("N.º Factura: <abbr style='color: red;' >*</abbr>");
                        $('#lbltipofactura').html("Tipo Factura: <abbr style='color: red;' >*</abbr>");


                    }




                } else {



                    $.extend(settings, {
                        rules: {
                            codigoempleado: {
                                required: true
                            },
                            tipoconsumo: {
                                required: true,
                                min: 1

                            },
                            motivogasto: {
                                required: true
                            },
                            slMoneda: {
                                required: true
                            },

                            txtMonto: {
                                required: true

                            },
                            tipoproveedor: {
                                required: true
                            },
                            rucproveedor: {
                                required: true
                            },
                            razonsocial: {
                                required: true
                            },
                            txtTcambio: {
                                required: true
                            },
                            slDestino: {
                                required: true
                            },
                            numerofactura: {
                                required: true
                            }, fechafactura: {
                                required: true
                            },
                            tipofactura: {
                                required: true
                            },
                            fechadesde: {
                                required: true
                            },
                            fechahasta: {
                                required: true
                            },
                        },
                        messages: {
                            codigoempleado: "Campo requerido",
                            tipoconsumo: "Campo requerido",
                            motivogasto: "Campo requerido",
                            slMoneda: "Campo requerido",
                            txtMonto: "Campo requerido",
                            tipoproveedor: "Campo requerido",
                            rucproveedor: "Campo requerido",
                            razonsocial: "Campo requerido",
                            txtTcambio: "Campo requerido",
                            slDestino: "Campo requeridoooo",
                            numerofactura: "Campo requerido",
                            fechafactura: "Campo requerido",
                            tipofactura: "Campo requerido",
                            fechadesde: "Campo requerido",
                            fechahasta: "Campo requerido"
                        }
                    });

                    $('#lblfactura').html("N.º Factura: <abbr style='color: red;' >*</abbr>");
                    $('#lblrazonsocial').html("Razon Social: <abbr style='color: red;' >*</abbr>");
                    $('#lblrucproveedor').html("Ruc Proveedor: <abbr style='color: red;' >*</abbr>");
                    $('#lbltipofactura').html("Tipo Factura: <abbr style='color: red;' >*</abbr>");
                }


                if (tconsumo == 9 || tconsumo == 12 || tconsumo == 10 ||tconsumo ==11) {
                    $('#lbltipofactura').html("Tipo Factura: ");
                    $('#lblrucproveedor').html("Ruc Proveedor: ");
                    $('#lblrazonsocial').html("Razon Social: ");

                    delete settings.rules.rucproveedor;
                    $('#lblrucproveedor').html("Ruc Proveedor:");
                    delete settings.rules.razonsocial;
                    $('#lblrazonsocial').html("Razon Social:");
                    delete settings.rules.tipofactura;
                    $('#lbltipofactura').html("Tipo Factura:");
                } else {
                    $.extend(settings, {
                        rules: {
                            codigoempleado: {
                                required: true
                            },
                            tipoconsumo: {
                                required: true,
                                min: 1

                            },
                            motivogasto: {
                                required: true
                            },
                            slMoneda: {
                                required: true
                            },

                            txtMonto: {
                                required: true

                            },
                            tipoproveedor: {
                                required: true
                            },
                            rucproveedor: {
                                required: true
                            },
                            razonsocial: {
                                required: true
                            },
                            txtTcambio: {
                                required: true
                            },
                            slDestino: {
                                required: true
                            },
                            //numerofactura: {
                            //    required: true
                            //},
                            fechafactura: {
                                required: true
                            },
                            tipofactura: {
                                required: true
                            },
                            fechadesde: {
                                required: true
                            },
                            fechahasta: {
                                required: true
                            },
                        },
                        messages: {
                            codigoempleado: "Campo requerido",
                            tipoconsumo: "Campo requerido",
                            motivogasto: "Campo requerido",
                            slMoneda: "Campo requerido",
                            txtMonto: "Campo requerido",
                            tipoproveedor: "Campo requerido",
                            rucproveedor: "Campo requerido",
                            razonsocial: "Campo requerido",
                            txtTcambio: "Campo requerido",
                            slDestino: "Campo requeridoooo",
                        /*    numerofactura: "Campo requerido",*/
                            fechafactura: "Campo requerido",
                            tipofactura: "Campo requerido",
                            fechadesde: "Campo requerido",
                            fechahasta: "Campo requerido"
                        }
                    });

                 /*   $('#lblfactura').html("N.º Factura: <abbr style='color: red;' >*</abbr>");*/
                    $('#lblrazonsocial').html("Razon Social: <abbr style='color: red;' >*</abbr>");
                    $('#lblrucproveedor').html("Ruc Proveedor: <abbr style='color: red;' >*</abbr>");
                    $('#lbltipofactura').html("Tipo Factura: <abbr style='color: red;' >*</abbr>");
                }
            }


    });


    </script>
}

